# VW Golf GTI Parameters
# ============================================================================
# References:
#   [1] Aggarwal & Gerdes, "Friction-Robust Autonomous Racing Using Trajectory
#       Optimization Over Multiple Models", IEEE OJCS, 2025 (Table 3, 4)
#   [2] Subosits & Gerdes, "Impacts of Model Fidelity on Trajectory Optimization
#       for Autonomous Vehicles in Extreme Maneuvers", IEEE T-IV, 2021 (Table VI-VIII)
#
# Both papers use the same VW Golf GTI test vehicle (2018/2019 model).
# ============================================================================

vehicle:
  name: "VW_Golf_GTI"

  # ============================================================================
  # Mass and Inertia
  # ============================================================================
  m_kg: 1868.0                    # Vehicle mass [kg] (paper: 1.868 Mg)
  iz_kgm2: 3049.0                 # Yaw moment of inertia [kg*m^2] (paper: 3.049 Mg*m^2)

  # ============================================================================
  # Geometry
  # ============================================================================
  a_m: 1.19                       # Distance from CG to front axle [m]
  b_m: 1.44                       # Distance from CG to rear axle [m]
  # Wheelbase L = a + b = 2.63 m
  track_f_m: 1.50                 # Front track width [m]
  track_r_m: 1.50                 # Rear track width [m]

  # ============================================================================
  # Heights
  # ============================================================================
  h_com_m: 0.55                   # Height of center of mass [m]
  h_rc_f_m: 0.07                  # Front roll center height [m]
  h_rc_r_m: 0.11                  # Rear roll center height [m]
  # Derived: h_rc_avg = (0.07*1.44 + 0.11*1.19)/2.63 = 0.088 m
  # Derived: h_roll_arm = h_com - h_rc_avg = 0.55 - 0.088 = 0.462 m â‰ˆ 0.46 m (paper: h_l)

  # ============================================================================
  # Roll Dynamics (from paper [1] Table 3)
  # ============================================================================
  K_phi_f_knmprad: 81.0           # Front roll stiffness [kN*m/rad]
  K_phi_r_knmprad: 38.0           # Rear roll stiffness [kN*m/rad]
  # Paper states: R_phi = 4.4 deg/g = 0.00783 rad/(m/s^2)
  roll_rate_radpmps2: 0.00783     # Roll rate [rad/(m/s^2)] = 4.4 deg/g

  # ============================================================================
  # Aerodynamics and Rolling Resistance
  # ============================================================================
  # Drag model: F_drag = cd0 + cd1*v + cd2*v^2
  cd0_n: 218.0                    # Rolling resistance (constant) [N]
  cd1_nspm: 0.0                   # Linear drag coefficient [N*s/m]
  cd2_ns2pm2: 0.4243              # Quadratic drag coefficient [N*s^2/m^2]

  # ============================================================================
  # Powertrain Configuration
  # ============================================================================
  drive_f_frac: 1.00              # Front wheel drive fraction (FWD)
  drive_r_frac: 0.00              # Rear wheel drive fraction
  brake_f_frac: 0.60              # Front brake bias
  brake_r_frac: 0.40              # Rear brake bias
  p_eng_max_w: 172000.0           # Maximum engine power [W] (paper: 172 kW)

  # ============================================================================
  # Actuator Limits
  # ============================================================================
  max_delta_deg: 27.0             # Maximum steering angle [deg]
  max_delta_dot_degps: 20.0       # Maximum steering rate [deg/s]
  # Note: Paper uses friction circle for Fx limits, not explicit bounds
  # These are soft bounds for the optimizer (can be adjusted)
  max_fx_kn: 10.0                 # Maximum longitudinal force [kN] (soft bound)
  min_fx_kn: -15.0                # Minimum longitudinal force [kN] (soft bound)
  max_fx_dot_knps: 10.0           # Maximum Fx rate [kN/s] (paper: 10000 N/s)
  min_fx_dot_knps: -10.0          # Minimum Fx rate [kN/s]

  # ============================================================================
  # Weight Transfer Dynamics
  # ============================================================================
  tau_long_weight_transfer_s: 0.10    # Longitudinal weight transfer time constant [s]
  tau_lat_weight_transfer_s: 0.10     # Lateral weight transfer time constant [s]

  # Brake yaw moment parameter
  gamma_none: 0.64                # Front/rear load transfer distribution [-]

# ============================================================================
# Tire Parameters (Fiala Brush Model)
# ============================================================================
# Cornering stiffness model: C_alpha = c0 + c1 * Fz
# Friction circle: Fy_max = sqrt((mu*Fz)^2 - Fx^2)
#
# ============================================================================
# SURFACE CONDITION PARAMETERS
# ============================================================================
# The tire parameters below are configured for DRY ASPHALT.
# To change surface conditions, modify mu_none and c1_alpha as follows:
#
# +------------+--------+--------+----------------+----------------+
# | Surface    | mu_f   | mu_r   | c1_alpha_f     | c1_alpha_r     |
# |            |        |        | [1/rad]        | [1/rad]        |
# +------------+--------+--------+----------------+----------------+
# | DRY        | 0.87   | 1.03   | 19.5           | 22.5           |  <-- CURRENT
# | WET        | 0.72   | 0.90   | 26.5           | 30.0           |
# | ICE/SNOW   | 0.25   | 0.26   |  8.0           | 13.0           |
# +------------+--------+--------+----------------+----------------+
#
# Sources:
#   - DRY:  Subosits & Gerdes 2021, Table VIII (mu=0.90 avg, Thunderhill dry)
#   - WET:  Subosits & Gerdes 2021, Table VII (mu=0.72-0.90, Thunderhill wet)
#   - ICE:  Aggarwal & Gerdes 2025, Table 4 (mu=0.25-0.35, frozen lake)
#           Subosits & Gerdes 2021, Table VI (mu=0.26, frozen lake)
#
# Note: Cornering stiffness tends to be HIGHER on wet surfaces due to
# different tire heating characteristics. Ice has lowest stiffness due
# to reduced tire-road interaction.
# ============================================================================

tire_front:
  # Cornering stiffness: C_alpha = c0 + c1 * Fz
  # At nominal front load ~9 kN: C_alpha = 19.5 * 9000 = 175.5 kN/rad
  c0_alpha_nprad: 0.0             # Base cornering stiffness [N/rad]
  c1_alpha_1prad: 19.5            # Load-dependent stiffness [1/rad]
                                  # DRY: 19.5 | WET: 26.5 | ICE: 8.0

  # Friction coefficient (DRY ASPHALT - Subosits Table VIII)
  mu_none: 0.87                   # Nominal friction coefficient [-]
                                  # DRY: 0.87 | WET: 0.72 | ICE: 0.25
  mu_lb: 0.80                     # Lower bound friction coefficient [-]
                                  # DRY: 0.80 | WET: 0.65 | ICE: 0.20
  mu_ub: 0.95                     # Upper bound friction coefficient [-]
                                  # DRY: 0.95 | WET: 0.80 | ICE: 0.30

  # Numerical smoothing for Fx saturation
  eps: 0.0025                     # Smoothing parameter (paper: eps_f = 0.0025)

tire_rear:
  # Cornering stiffness: C_alpha = c0 + c1 * Fz
  # At nominal rear load ~10 kN: C_alpha = 22.5 * 10000 = 225 kN/rad
  c0_alpha_nprad: 0.0             # Base cornering stiffness [N/rad]
  c1_alpha_1prad: 22.5            # Load-dependent stiffness [1/rad]
                                  # DRY: 22.5 | WET: 30.0 | ICE: 13.0

  # Friction coefficient (DRY ASPHALT - Subosits Table VIII)
  # Note: Rear typically has slightly higher mu due to weight distribution
  mu_none: 1.03                   # Nominal friction coefficient [-]
                                  # DRY: 1.03 | WET: 0.90 | ICE: 0.26
  mu_lb: 0.95                     # Lower bound friction coefficient [-]
                                  # DRY: 0.95 | WET: 0.82 | ICE: 0.22
  mu_ub: 1.10                     # Upper bound friction coefficient [-]
                                  # DRY: 1.10 | WET: 0.98 | ICE: 0.30

  # Numerical smoothing for Fx saturation
  eps: 0.00208                    # Smoothing parameter (paper: eps_r = 0.00208)

# ============================================================================
# Tire Saturation Parameters (Aggarwal paper Table 1)
# These are the same for front and rear, loaded from code defaults if not specified
# ============================================================================
fy_xi: 0.95                     # Tire saturation slope parameter (xi) [-]
max_allowed_fx_frac: 0.99       # Fy_max scaling (rho) to avoid singularity [-]

# ============================================================================
# Numerical Parameters
# ============================================================================
numerical:
  softplus_beta: 2.0              # Softplus smoothing for braking extraction
